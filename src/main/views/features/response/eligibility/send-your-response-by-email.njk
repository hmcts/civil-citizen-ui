{% extends "claim-details-tpl.njk" %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "../../../macro/csrf.njk" import csrfProtection %}
{% from "../../../macro/yesNoForm.njk" import yesNoRadioButton %}
{% from "../../../macro/contact-us-for-help.njk" import contactUsForHelp %}

{% set heading = 'Post your response' %}

{% block content %}
  <div class="govuk-width-container">
    <main class="govuk-main-wrapper" role="main">
      {% set header = t('Post your response') %}

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          {{ csrfProtection(csrf) }}
          <h1 class="govuk-heading-l govuk-!-margin-bottom-1">{{header}}</h1>
          <p class="govuk-body">{{ t('We need to receive your response before <span class="bold">4pm on {{ responseDeadline }}</span>. You could get a County Court Judgment against you if you miss the deadline.',
              { responseDeadline: claim.responseDeadline }) | safe }}</p>

          <h2 class="govuk-heading-m govuk-!-margin-bottom-1">{{ t('Follow these steps') }}</h2>
          <ul class="govuk-list--number">
            <li>
              {% if draft.response.type === ResponseType.FULL_ADMISSION %}
                {{ t('Download the <span class="bold-small">admission form.</span>') | safe }}
              {% endif %}
              {% if draft.response.type === ResponseType.PART_ADMISSION %}
                {{ t('Download the <span class="bold-small">admission form</span> and the <span class="bold-small">defence form</span>') | safe }}
              {% endif %}
              {% if draft.response.type === ResponseType.DEFENCE %}
                {% if draft.rejectAllOfClaim.option === RejectAllOfClaimOption.COUNTER_CLAIM %}
                  {{ t('Download the <span class="bold-small">defence and counterclaim form.</span>') | safe }}
                {% else %}
                  {{ t('Download the <span class="bold-small">admission form</span> and the <span class="bold-small">defence form</span>') | safe }}
                {% endif %}
              {% endif %}
            </li>
            {% if draft.response.type === ResponseType.FULL_ADMISSION %}
              <li>{{ t('Print and complete the form') }}</li>
            {% endif %}
            {% if draft.response.type === ResponseType.PART_ADMISSION %}
              <li>{{ t('Print and complete the forms (ignore section 4 of the defence form unless you’re making a counterclaim).') }}</li>
            {% endif %}
            {% if draft.response.type === ResponseType.DEFENCE %}
              {% if draft.rejectAllOfClaim.option === RejectAllOfClaimOption.COUNTER_CLAIM %}
                <li>{{ t('Print and complete the form') }}</li>
              {% elseif draft.rejectAllOfClaim.option === RejectAllOfClaimOption.ALREADY_PAID %}
                <li>{{ t('Print and complete the forms (ignore section 4 of the defence form unless you’re making a counterclaim).') }}</li>
              {% endif %}
            {% endif %}
            <li>{{ t('Post the forms to:') }}</li>
          </ul>
          {% if signPosting %}
            <div class="keep-formatting panel">{{ t('HMCTS CMC') }}
              {{ t('PO Box 12747') }}
              {{ t('Harlow') }}
              {{ t('CM20 9RA') }}
            </div>
          {% else %}
            <div class="keep-formatting panel">{{ t('Civil Money Claims') }}
              {{ t('St. Katharine`s House') }}
              {{ t('21-27 St. Katharine`s Street') }}
              {{ t('Northampton') }}
              {{ t('NN1 2LH') }}
             </div>
          {% endif %}

      <p class="govuk-body">{{ t('You can also email completed forms to {{ supportEmailAddress }}', { supportEmailAddress: supportEmailAddress }) }}</p>
      <h2 class="govuk-heading-m govuk-!-margin-bottom-1">{{ t('Download and complete the form') }}</h2>

      {% if draft.response.type === ResponseType.FULL_ADMISSION %}
       <p class="govuk-body">{{ t(externalLink('Download the admission form (PDF, 102 KB)', asset_paths["pdf"] + '/OCON9A.pdf') + '.') | safe }}</p>
      {% endif %}

      {% if draft.response.type === ResponseType.PART_ADMISSION %}
        <p class="govuk-body">{{ t(externalLink('Download admission form (PDF, 102 KB)', asset_paths["pdf"] + '/OCON9A.pdf') + '.') | safe }}</p>
        <p class="govuk-body">{{ t(externalLink('Download defence form (PDF, 76 KB)', asset_paths["pdf"] + '/OCON9B.pdf') + '.') | safe }}</p>
      {% endif %}

      {% if draft.response.type === ResponseType.DEFENCE %}
        {% if draft.rejectAllOfClaim.option === RejectAllOfClaimOption.COUNTER_CLAIM %}
          <p class="govuk-body">{{ t('Download defence and counterclaim form (PDF, 368 KB)') | safe }}</p>
        {% elseif draft.rejectAllOfClaim.option === RejectAllOfClaimOption.ALREADY_PAID %}
          <p class="govuk-body">{{ t(externalLink('Download admission form (PDF, 102 KB)', asset_paths["pdf"] + '/OCON9A.pdf') + '.') | safe }}</p>
          <p class="govuk-body">{{ t(externalLink('Download defence form (PDF, 76 KB)', asset_paths["pdf"] + '/OCON9B.pdf') + '.') | safe }}</p>
        {% endif %}
      {% endif %}

      <p class="govuk-body">{{ t('Use these details when completing the form:') }}</p>
      <ul class="list list-bullet">
        <li>{{ t('Claim number {{ claimNumber }}', { claimNumber: claim.claimNumber }) }}</li>
        <li>{{ t('Claimant {{ claimantName }}', { claimantName: claim.claimData.claimant.name}) }}</li>
        <li>{{ t('Defendant {{ defendantName }}', { defendantName: claim.claimData.defendant.name}) }}</li>
      </ul>

      {% if draft.response.type === ResponseType.DEFENCE %}
        {% if draft.rejectAllOfClaim.option === RejectAllOfClaimOption.COUNTER_CLAIM %}
          <h2 class="heading-medium">{{ t('Counterclaim fee') }}</h2>
          <p class="govuk-body">
            {{ t('You`ll need to pay a court fee if you make a counterclaim.')}}
          </p>
          <details class="notice">
            <summary>{{ t('View claim fees') }}</summary>
            <div class="panel">
              <p class="govuk-body">
                {{ t('The fee is based on the amount you`re claiming, including interest.') }}
              </p>
              <table>
                <thead>
                <tr>
                  <th scope="col">{{ t('Claim amount') }}</th>
                  <th scope="col">{{ t('Fee') }}</th>
                </tr>
                </thead>
              </table>
            </div>
          </details>
        {% endif %}
      {% endif %}
          {{ contactUsForHelp(t) }}
        </div>
      </div>
    </main>
  </div>
{% endblock %}
{% block contactForHelp %}{% endblock %}
