{% extends "question-template.njk" %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "macro/csrf.njk" import csrfProtection %}
{% from "../../../macro/buttons.njk" import saveAndContinueButton %}
{% from "../../../macro/conditional-checkBoxHTML.njk" import conditionalCheckBoxHTML %}

{% block question %}
  {% set title = t("Debts you're behind on") %}
  {% set descriptionTitle = "Enter details of debts for which you're:" %}
  {% set descriptionArrears = "'in arrears' (you've missed regular payments)" %}
  {% set descriptionRegularRepayments = "making regular repayments to clear the missed payments" %}
  {% set description %}

  {% endset -%}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
        <h1 class="govuk-fieldset__heading">Debts you're behind on</h1>
      </legend>
      <div id="waste-hint" class="govuk-hint">
        <p>{{ descriptionTitle }}</p>
        <ul>
          <li>{{ descriptionArrears }}</li>
          <li>{{ descriptionRegularRepayments }}</li>
        </ul>
      </div>
      <form method="post" novalidate>
        {{ csrfProtection(csrfToken) }}
        {% for checkBoxField in checkBoxFields %}
          {{ govukCheckboxes({
            idPrefix: checkBoxField.name,
            name: checkBoxField.name,
            items: [
              {
                value: checkBoxField.name,
                text: checkBoxField.text,
                checked: priorityDebts[checkBoxField.name].isDeclared if priorityDebts[checkBoxField.name],
                conditional: {
                html: conditionalCheckBoxHTML(checkBoxField.name, priorityDebts[checkBoxField.name], priorityDebtErrors[checkBoxField.name])
              }
              }
            ]
          }) }}
        {% endfor %}
        <p class="govuk-fieldset__legend govuk-fieldset__legend--m" role="status" aria-live="polite">
          {{ t('Total monthly repayments') }}: Â£ <span class="total-monthly-income-expense">
            0
          </span>
        </p>
        {{ saveAndContinueButton() }}
    </div>
    </form>
  </div>
  </div>

{% endblock %}
